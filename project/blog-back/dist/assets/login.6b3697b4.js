import{F as r,a as l}from"./Form.5cb29418.js";import{n}from"./index.ee678371.js";import"./request.52f2f945.js";import"./vendor.abe46e21.js";var a=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",{staticClass:"login"},[t("div",{staticClass:"title"},[e._v("LS\u540E\u53F0")]),t("div",{staticClass:"card"},[t("el-form",{ref:"loginForm",staticClass:"loginForm",attrs:{model:e.loginInfo,rules:e.rules}},[t("el-form-item",{staticClass:"item",attrs:{prop:"id"}},[t("el-input",{attrs:{placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9"},nativeOn:{keyup:function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:e.login.apply(null,arguments)}},model:{value:e.loginInfo.id,callback:function(s){e.$set(e.loginInfo,"id",s)},expression:"loginInfo.id"}},[t("template",{slot:"prepend"},[e._v("\u8D26\u53F7")])],2)],1),t("el-form-item",{staticClass:"item",attrs:{prop:"password"}},[t("el-input",{attrs:{placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9","show-password":""},nativeOn:{keyup:function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:e.login.apply(null,arguments)}},model:{value:e.loginInfo.password,callback:function(s){e.$set(e.loginInfo,"password",s)},expression:"loginInfo.password"}},[t("template",{slot:"prepend"},[e._v("\u5BC6\u7801")])],2)],1),t("el-form-item",[t("el-button",{attrs:{type:"info"},on:{click:e.register}},[e._v("\u6CE8\u518C")]),t("el-button",{attrs:{type:"info"},on:{click:e.login}},[e._v("\u767B\u5F55")]),t("el-button",{attrs:{type:"info"},on:{click:e.forget}},[e._v("\u5FD8\u8BB0\u5BC6\u7801")])],1)],1)],1),t("my-form",{attrs:{title:e.title,formdata:e.formdata,row:e.bindData,rules:e.rules,visible:e.dialogVisible},on:{"update:visible":function(s){e.dialogVisible=s},cancelForm:e.handleClose,submitFrom:e.submitFrom}})],1)},u=[];const d={name:"Login",components:{"my-form":r},data(){return{loginInfo:{id:new String,password:new String},rules:{id:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D26\u53F7id",trigger:"blur"},{min:1,message:"\u8BF7\u8F93\u5165\u8D26\u53F7id",trigger:"blur"}],password:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801",trigger:"blur"},{min:6,max:20,message:"\u5BC6\u7801\u57286-20\u4E2A\u5B57\u7B26",trigger:"blur"}]},formdata:{username:{label:"\u7528\u6237\u540D",value:""},emil:{label:"\u90AE\u7BB1",value:""},password:{label:"\u5BC6\u7801",value:"",type:"password"},rePassword:{label:"\u786E\u8BA4\u5BC6\u7801",value:"",type:"password"}},bindData:{username:"",emil:"",password:"",rePassword:""},title:"\u6CE8\u518C",dialogVisible:!1}},mounted(){this.init()},methods:{init(){},login(){this.$refs.loginForm.validate(async e=>{if(!e)console.log("[login] \u6821\u9A8C\u5931\u8D25");else{let o=await l(this.loginInfo);if((o==null?void 0:o.flag)==1){localStorage.setItem("token",o.dataInfo.token);let t=o.dataInfo.userInfo;localStorage.setItem("userInfo",JSON.stringify(t)),this.$store.commit("user/setUserInfo",t),this.$router.push("/"),this.$message.success("\u767B\u5F55\u6210\u529F")}}})},register(){this.dialogVisible=!0,this.title="\u6CE8\u518C"},forget(){this.dialogVisible=!0,this.title="\u5FD8\u8BB0\u5BC6\u7801"},handleClose(){},submitFrom(){}}},i={};var m=n(d,a,u,!1,f,"3c85e29d",null,null);function f(e){for(let o in i)this[o]=i[o]}var v=function(){return m.exports}();export{v as default};
